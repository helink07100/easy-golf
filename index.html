<!DOCTYPE html>
<html>
  <head>
    <title>Easy Golf</title>
    <link rel="icon" type="image/png" href="logo/logo-fav.jpeg" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta
      name="viewport"
      content="width=device-width,height=device-height, initial-scale=1, maximum-scale=1, user-scalable=0, shrink-to-fit=no, minimal-ui"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <link rel="stylesheet" type="text/css" href="./game.css?v=1709209562" />
  </head>
  <body>
    <script type="text/javascript" src="./js/jquery.js"></script>
    <script src="media/havok/havok.js"></script>
    <script type="text/javascript" src="./js/babylon.js"></script>
    <script type="text/javascript" src="./js/init.js"></script>
    <script type="text/javascript" src="./js/jquery-extend.js"></script>
    <script type="text/javascript" src="./js/ig.js"></script>
    <script>
      window.fbAsyncInit = function () {
        FB.init({
          appId: "442470581608658",
          xfbml: true,
          version: "v21.0",
        });
        FB.AppEvents.logPageView();
      };

      (function (d, s, id) {
        var js,
          fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
          return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
      })(document, "script", "facebook-jssdk");
    </script>
    <script
      id="facebook-jssdk"
      src="https://connect.facebook.net/en_US/fbinstant.6.2.js"
    ></script>
    <script type="text/javascript">
      // 加载fb
      window.onload = function () {
        FBInstant.initializeAsync()
          .then(FBInstant.startGameAsync)
          .then(onStart);
      };

      // 检查是否支持广告
      function onStart() {
        let supportedAPIs = FBInstant.getSupportedAPIs();
        let canShowAds =
          supportedAPIs.includes("getInterstitialAdAsync") &&
          supportedAPIs.includes("getRewardedVideoAsync");
        if (!canShowAds) {
          console.error("Ads not supported in this session");
        } else {
          // 如果可以则加载，插页式广告
          preloadInterstitial();
        }
      }

      // 预加载插页式广告
      function preloadInterstitial() {
        console.log("Preloading Interstitial");
        FBInstant.getInterstitialAdAsync("id")
          .then(function (interstitial) {
            // Load the Ad asynchronously
            _SETTINGS.Ad.preloadedInterstitial = interstitial;
            return _SETTINGS.Ad.preloadedInterstitial.loadAsync();
          })
          .then(function () {
            console.log("Interstitial ready");
            showInterstitial();
          })
          .catch(function (error) {
            console.error("Interstitial failed to preload: " + error.message);
          });
      }
    </script>
    <div id="ajaxbar">
      <div id="game"><canvas id="canvas"></canvas></div>
      <div id="webgl"><canvas id="webglcanvas"></canvas></div>
      <div id="play" class="play" onclick></div>
    </div>
  </body>
</html>
